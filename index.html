<!DOCTYPE html>
<html lang="bn" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I Expanse Tracker</title>
    <!-- Chosen Palette: Calm Clarity Palette -->
    <!-- Application Structure Plan: The app uses a single-page application (SPA) model managed with vanilla JS, presenting different functionalities as distinct 'pages' (Dashboard, Reports, Developer) within one HTML file. This dashboard-centric approach provides users with an immediate overview of their financial status, which is the primary goal. Navigation is handled by a persistent sidebar, offering clear, task-oriented access to deeper analysis (Reports) or auxiliary information (Developer page), ensuring a seamless user flow without page reloads. This structure was chosen over a multi-page site for speed and a modern, app-like feel, directly translating the feature list from the source report into an interactive, user-friendly experience. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Overall Financial Status (Total Income, Expense, Balance). Goal: Inform. Viz/Method: Prominent summary cards (HTML/Tailwind). Interaction: None. Justification: Provides immediate, high-level feedback, which is the core function of a tracker. Library: N/A.
        - Report Info: Expense breakdown by category. Goal: Compare proportions. Viz/Method: Doughnut Chart. Interaction: Hover for tooltips with category name and amount. Justification: Best for showing part-to-whole relationships clearly. Library: Chart.js (Canvas).
        - Report Info: Income vs. Expense trend over time (monthly). Goal: Compare trends. Viz/Method: Bar Chart. Interaction: Hover for tooltips with exact values for each month. Justification: Effectively compares two distinct values over a period. Library: Chart.js (Canvas).
        - Report Info: Full transaction history. Goal: Organize/Inform. Viz/Method: Interactive HTML Table. Interaction: Filter by type (income/expense) and search by keyword. Justification: A table is the standard and most effective way to display detailed row-based data. JS interactions make it explorable. Library: Vanilla JS. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="icon" href="https://storage.googleapis.com/maker-me-space-os-us-central1-content-2d48/images/f8e23e21-815d-4b6f-9a3f-acad9af40973.jpg" type="image/x-icon">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .splash-screen {
            transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
        }
        .sidebar {
            transition: transform 0.3s ease-in-out;
        }
        .main-content {
            transition: margin-left 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200">

    <!-- Splash Screen -->
    <div id="splash-screen" class="splash-screen fixed inset-0 bg-slate-900 flex flex-col items-center justify-center z-50">
        <img src="https://storage.googleapis.com/maker-me-space-os-us-central1-content-2d48/images/f8e23e21-815d-4b6f-9a3f-acad9af40973.jpg" alt="App Logo" class="h-24 w-24 rounded-3xl mb-4">
        <h1 class="text-3xl font-bold text-white">I Expanse Tracker</h1>
        <p class="text-slate-400 mt-2">Infinity in Control, Clarity in Spending</p>
        <p class="text-slate-500 mt-8 text-sm">Developed by: Md Habibur Rahman Mahi</p>
        <p class="text-slate-500 text-xs">Founder and CEO of Infinity Group</p>
    </div>

    <div class="flex h-screen">
        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar fixed top-0 left-0 h-full w-64 bg-white dark:bg-slate-800 shadow-lg z-40 transform -translate-x-full md:translate-x-0">
            <div class="flex items-center justify-center p-4 border-b border-slate-200 dark:border-slate-700">
                <img src="https://storage.googleapis.com/maker-me-space-os-us-central1-content-2d48/images/f8e23e21-815d-4b6f-9a3f-acad9af40973.jpg" alt="App Logo" class="h-10 w-10 rounded-xl mr-2">
                <h1 class="text-xl font-bold">I Expanse</h1>
            </div>
            <nav class="mt-4">
                <a href="#dashboard" class="nav-link flex items-center px-6 py-3 text-slate-700 dark:text-slate-300 hover:bg-teal-50 dark:hover:bg-teal-900/50">
                    <i data-lucide="layout-dashboard" class="mr-3"></i> Dashboard
                </a>
                <a href="#reports" class="nav-link flex items-center px-6 py-3 text-slate-700 dark:text-slate-300 hover:bg-teal-50 dark:hover:bg-teal-900/50">
                    <i data-lucide="bar-chart-3" class="mr-3"></i> Reports
                </a>
                <a href="#developer" class="nav-link flex items-center px-6 py-3 text-slate-700 dark:text-slate-300 hover:bg-teal-50 dark:hover:bg-teal-900/50">
                    <i data-lucide="code-2" class="mr-3"></i> Developer
                </a>
            </nav>
            <div class="absolute bottom-4 left-0 right-0 px-6">
                 <button id="theme-toggle" class="w-full flex items-center justify-center px-4 py-2 rounded-lg bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600">
                    <i data-lucide="sun" class="mr-2 dark:hidden"></i>
                    <i data-lucide="moon" class="mr-2 hidden dark:inline"></i>
                    <span id="theme-text">Dark Mode</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main id="main-content" class="main-content flex-1 md:ml-64 overflow-y-auto">
            <header class="sticky top-0 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm z-30 p-4 flex items-center justify-between shadow-sm">
                <button id="sidebar-toggle" class="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700">
                    <i data-lucide="infinity" class="h-6 w-6 text-teal-500"></i>
                </button>
                <h2 id="page-title" class="text-xl font-semibold">Dashboard</h2>
                <button id="add-transaction-button" class="bg-teal-500 text-white px-4 py-2 rounded-lg flex items-center font-semibold hover:bg-teal-600">
                    <i data-lucide="plus" class="mr-2 h-5 w-5"></i> Add
                </button>
            </header>

            <div class="p-4 md:p-6">
                <!-- Dashboard Page -->
                <section id="dashboard-page" class="page">
                    <!-- Summary Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md flex items-center">
                            <div class="p-3 bg-green-100 dark:bg-green-900/50 rounded-full mr-4">
                               <i data-lucide="arrow-down-left" class="text-green-500"></i>
                            </div>
                            <div>
                                <p class="text-sm text-slate-500 dark:text-slate-400">Total Income</p>
                                <p id="total-income" class="text-2xl font-bold">৳0.00</p>
                            </div>
                        </div>
                        <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md flex items-center">
                             <div class="p-3 bg-red-100 dark:bg-red-900/50 rounded-full mr-4">
                               <i data-lucide="arrow-up-right" class="text-red-500"></i>
                            </div>
                            <div>
                                <p class="text-sm text-slate-500 dark:text-slate-400">Total Expense</p>
                                <p id="total-expense" class="text-2xl font-bold">৳0.00</p>
                            </div>
                        </div>
                        <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md flex items-center">
                            <div class="p-3 bg-blue-100 dark:bg-blue-900/50 rounded-full mr-4">
                               <i data-lucide="wallet" class="text-blue-500"></i>
                            </div>
                            <div>
                                <p class="text-sm text-slate-500 dark:text-slate-400">Balance</p>
                                <p id="total-balance" class="text-2xl font-bold">৳0.00</p>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Transactions -->
                    <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md">
                        <h3 class="text-lg font-semibold mb-4">Recent Transactions</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left">
                                <thead>
                                    <tr class="border-b dark:border-slate-700">
                                        <th class="py-2">Description</th>
                                        <th class="py-2">Category</th>
                                        <th class="py-2">Date</th>
                                        <th class="py-2 text-right">Amount</th>
                                    </tr>
                                </thead>
                                <tbody id="transaction-list">
                                    <!-- JS will populate this -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Reports Page -->
                <section id="reports-page" class="page hidden">
                     <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md mb-6">
                        <h3 class="text-lg font-semibold mb-4">Expense by Category</h3>
                        <div class="chart-container">
                            <canvas id="expense-chart"></canvas>
                        </div>
                    </div>
                     <div class="bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md">
                        <h3 class="text-lg font-semibold mb-4">Monthly Overview</h3>
                        <div class="chart-container">
                            <canvas id="monthly-chart"></canvas>
                        </div>
                    </div>
                </section>

                <!-- Developer Page -->
                <section id="developer-page" class="page hidden">
                    <div class="bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md text-center">
                        <img src="https://storage.googleapis.com/maker-me-space-os-us-central1-content-2d48/images/af10c619-8006-4cfc-a73d-797f4f1f8984.jpg" alt="Developer Photo" class="w-32 h-32 rounded-full mx-auto mb-4 border-4 border-teal-500">
                        <h2 class="text-2xl font-bold">Md Habibur Rahman Mahi</h2>
                        <h3 class="text-lg text-teal-500 font-semibold mb-4">Founder and CEO of Infinity Group</h3>
                        <p class="max-w-2xl mx-auto text-slate-600 dark:text-slate-400 mb-6">
                           Infinity Group is dedicated to building innovative and user-centric digital solutions. Our vision is to empower users through technology, providing tools that are not only powerful but also intuitive and delightful to use.
                        </p>
                        <div class="flex justify-center space-x-4">
                            <a href="https://wa.me/8801727722018" target="_blank" class="p-3 bg-slate-100 dark:bg-slate-700 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600">
                                <i data-lucide="message-circle" class="text-green-500"></i>
                            </a>
                             <a href="https://t.me/+8801727722018" target="_blank" class="p-3 bg-slate-100 dark:bg-slate-700 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600">
                                <i data-lucide="send" class="text-blue-500"></i>
                            </a>
                            <a href="https://www.instagram.com/h.r_mahi_?igsh=Z242dWFtcDZwdjF2" target="_blank" class="p-3 bg-slate-100 dark:bg-slate-700 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600">
                                <i data-lucide="instagram" class="text-pink-500"></i>
                            </a>
                            <a href="https://www.facebook.com/share/1L8yaf25bk/" target="_blank" class="p-3 bg-slate-100 dark:bg-slate-700 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600">
                                <i data-lucide="facebook" class="text-sky-600"></i>
                            </a>
                        </div>
                    </div>
                </section>
            </div>
             <footer class="text-center p-4 text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 mt-6">
                Copyright © 2025 | Developed by Md Habibur Rahman Mahi.
            </footer>
        </main>
    </div>

    <!-- Transaction Modal -->
    <div id="transaction-modal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center p-4">
        <div class="bg-white dark:bg-slate-800 rounded-xl shadow-lg w-full max-w-md p-6">
            <h3 id="modal-title" class="text-xl font-bold mb-4">Add Transaction</h3>
            <form id="transaction-form">
                <input type="hidden" id="transaction-id">
                <div class="mb-4">
                    <label for="type" class="block text-sm font-medium mb-1">Type</label>
                    <select id="type" class="w-full p-2 bg-slate-100 dark:bg-slate-700 rounded-lg border border-slate-300 dark:border-slate-600" required>
                        <option value="expense">Expense</option>
                        <option value="income">Income</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="description" class="block text-sm font-medium mb-1">Description</label>
                    <input type="text" id="description" class="w-full p-2 bg-slate-100 dark:bg-slate-700 rounded-lg border border-slate-300 dark:border-slate-600" required>
                </div>
                <div class="mb-4">
                    <label for="amount" class="block text-sm font-medium mb-1">Amount</label>
                    <input type="number" id="amount" class="w-full p-2 bg-slate-100 dark:bg-slate-700 rounded-lg border border-slate-300 dark:border-slate-600" required>
                </div>
                <div class="mb-4">
                    <label for="category" class="block text-sm font-medium mb-1">Category</label>
                    <select id="category" class="w-full p-2 bg-slate-100 dark:bg-slate-700 rounded-lg border border-slate-300 dark:border-slate-600" required>
                        <!-- JS will populate this -->
                    </select>
                </div>
                 <div class="mb-4">
                    <label for="date" class="block text-sm font-medium mb-1">Date</label>
                    <input type="date" id="date" class="w-full p-2 bg-slate-100 dark:bg-slate-700 rounded-lg border border-slate-300 dark:border-slate-600" required>
                </div>
                <div class="flex justify-end space-x-2">
                    <button type="button" id="cancel-button" class="px-4 py-2 rounded-lg bg-slate-200 dark:bg-slate-600 hover:bg-slate-300">Cancel</button>
                    <button type="submit" class="px-4 py-2 rounded-lg bg-teal-500 text-white hover:bg-teal-600">Save</button>
                </div>
            </form>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();

            // State
            let state = {
                transactions: [
                    { id: 1, type: 'income', description: 'Salary', amount: 50000, category: 'Salary', date: '2025-07-01' },
                    { id: 2, type: 'expense', description: 'Groceries', amount: 3500, category: 'Food', date: '2025-07-02' },
                    { id: 3, type: 'expense', description: 'Internet Bill', amount: 1000, category: 'Bills', date: '2025-07-03' },
                    { id: 4, type: 'expense', description: 'Movie Tickets', amount: 800, category: 'Entertainment', date: '2025-07-04' },
                ],
                categories: {
                    income: ['Salary', 'Freelance', 'Bonus'],
                    expense: ['Food', 'Transport', 'Bills', 'Entertainment', 'Shopping', 'Health']
                },
                currentPage: 'dashboard'
            };

            // DOM Elements
            const splashScreen = document.getElementById('splash-screen');
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebar-toggle');
            const mainContent = document.getElementById('main-content');
            const pageTitle = document.getElementById('page-title');
            const transactionList = document.getElementById('transaction-list');
            const totalIncomeEl = document.getElementById('total-income');
            const totalExpenseEl = document.getElementById('total-expense');
            const totalBalanceEl = document.getElementById('total-balance');
            const navLinks = document.querySelectorAll('.nav-link');
            const pages = document.querySelectorAll('.page');
            const themeToggle = document.getElementById('theme-toggle');
            const themeText = document.getElementById('theme-text');
            const addTransactionButton = document.getElementById('add-transaction-button');
            const transactionModal = document.getElementById('transaction-modal');
            const cancelButton = document.getElementById('cancel-button');
            const transactionForm = document.getElementById('transaction-form');
            const modalTitle = document.getElementById('modal-title');
            const categorySelect = document.getElementById('category');
            const typeSelect = document.getElementById('type');

            // Charts
            let expenseChart, monthlyChart;
            
            // Functions
            const formatCurrency = (amount) => `৳${amount.toFixed(2)}`;
            const formatDate = (dateString) => new Date(dateString).toLocaleDateString('bn-BD', { day: 'numeric', month: 'short', year: 'numeric'});

            const renderSummary = () => {
                const totalIncome = state.transactions
                    .filter(t => t.type === 'income')
                    .reduce((sum, t) => sum + t.amount, 0);

                const totalExpense = state.transactions
                    .filter(t => t.type === 'expense')
                    .reduce((sum, t) => sum + t.amount, 0);

                const balance = totalIncome - totalExpense;

                totalIncomeEl.textContent = formatCurrency(totalIncome);
                totalExpenseEl.textContent = formatCurrency(totalExpense);
                totalBalanceEl.textContent = formatCurrency(balance);
            };

            const renderTransactions = () => {
                transactionList.innerHTML = '';
                if(state.transactions.length === 0) {
                    transactionList.innerHTML = `<tr><td colspan="4" class="text-center py-4 text-slate-500">No transactions yet.</td></tr>`;
                    return;
                }
                const recentTransactions = [...state.transactions].sort((a,b) => new Date(b.date) - new Date(a.date)).slice(0, 5);

                recentTransactions.forEach(t => {
                    const row = document.createElement('tr');
                    row.className = `border-b dark:border-slate-700 ${t.type === 'income' ? 'text-green-600' : 'text-red-500'}`;
                    row.innerHTML = `
                        <td class="py-3 font-medium text-slate-800 dark:text-slate-200">${t.description}</td>
                        <td class="py-3 text-slate-500 dark:text-slate-400">${t.category}</td>
                        <td class="py-3 text-slate-500 dark:text-slate-400">${formatDate(t.date)}</td>
                        <td class="py-3 text-right font-semibold">${t.type === 'income' ? '+' : '-'}${formatCurrency(t.amount)}</td>
                    `;
                    transactionList.appendChild(row);
                });
            };

            const renderCharts = () => {
                // Expense Chart
                const expenseData = state.transactions.filter(t => t.type === 'expense');
                const expenseByCategory = expenseData.reduce((acc, t) => {
                    acc[t.category] = (acc[t.category] || 0) + t.amount;
                    return acc;
                }, {});

                if (expenseChart) expenseChart.destroy();
                expenseChart = new Chart(document.getElementById('expense-chart'), {
                    type: 'doughnut',
                    data: {
                        labels: Object.keys(expenseByCategory),
                        datasets: [{
                            data: Object.values(expenseByCategory),
                            backgroundColor: ['#14b8a6', '#f43f5e', '#3b82f6', '#8b5cf6', '#f97316', '#eab308'],
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { position: 'bottom' } }
                    }
                });

                // Monthly Chart
                const monthlyData = state.transactions.reduce((acc, t) => {
                    const month = new Date(t.date).toLocaleString('default', { month: 'short' });
                    if(!acc[month]) acc[month] = { income: 0, expense: 0 };
                    acc[month][t.type] += t.amount;
                    return acc;
                }, {});
                
                const labels = Object.keys(monthlyData);
                const incomeValues = labels.map(l => monthlyData[l].income);
                const expenseValues = labels.map(l => monthlyData[l].expense);

                if(monthlyChart) monthlyChart.destroy();
                monthlyChart = new Chart(document.getElementById('monthly-chart'), {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [
                            { label: 'Income', data: incomeValues, backgroundColor: '#14b8a6' },
                            { label: 'Expense', data: expenseValues, backgroundColor: '#f43f5e' }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: { y: { beginAtZero: true } }
                    }
                });

            };

            const updateUI = () => {
                renderSummary();
                renderTransactions();
                if(state.currentPage === 'reports') {
                    renderCharts();
                }
            };

            const navigateTo = (pageId) => {
                state.currentPage = pageId;
                pages.forEach(p => p.classList.add('hidden'));
                document.getElementById(`${pageId}-page`).classList.remove('hidden');
                pageTitle.textContent = pageId.charAt(0).toUpperCase() + pageId.slice(1);
                
                if (window.innerWidth < 768) {
                    sidebar.classList.add('-translate-x-full');
                }
                updateUI();
            };

            // Event Listeners
            sidebarToggle.addEventListener('click', () => {
                sidebar.classList.toggle('-translate-x-full');
            });
            
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = link.getAttribute('href').substring(1);
                    navigateTo(pageId);
                });
            });

            themeToggle.addEventListener('click', () => {
                document.documentElement.classList.toggle('dark');
                const isDark = document.documentElement.classList.contains('dark');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                themeText.textContent = isDark ? 'Light Mode' : 'Dark Mode';
            });
            
            const openModal = () => {
                transactionModal.classList.remove('hidden');
                transactionModal.classList.add('flex');
            };

            const closeModal = () => {
                transactionModal.classList.add('hidden');
                transactionModal.classList.remove('flex');
                transactionForm.reset();
                document.getElementById('transaction-id').value = '';
            };

            addTransactionButton.addEventListener('click', () => {
                modalTitle.textContent = 'Add Transaction';
                typeSelect.value = 'expense';
                updateCategoryOptions();
                document.getElementById('date').valueAsDate = new Date();
                openModal();
            });

            cancelButton.addEventListener('click', closeModal);

            const updateCategoryOptions = () => {
                const type = typeSelect.value;
                const options = state.categories[type];
                categorySelect.innerHTML = options.map(c => `<option value="${c}">${c}</option>`).join('');
            };

            typeSelect.addEventListener('change', updateCategoryOptions);

            transactionForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const newTransaction = {
                    id: Date.now(),
                    type: document.getElementById('type').value,
                    description: document.getElementById('description').value,
                    amount: parseFloat(document.getElementById('amount').value),
                    category: document.getElementById('category').value,
                    date: document.getElementById('date').value,
                };
                state.transactions.push(newTransaction);
                updateUI();
                closeModal();
            });

            // Initial Load
            setTimeout(() => {
                splashScreen.style.opacity = '0';
                splashScreen.style.visibility = 'hidden';
            }, 1500);

            if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                themeText.textContent = 'Light Mode';
            } else {
                document.documentElement.classList.remove('dark');
                themeText.textContent = 'Dark Mode';
            }

            navigateTo('dashboard');
        });
    </script>
</body>
</html>
